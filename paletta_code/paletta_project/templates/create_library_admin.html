<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create a Library</title>
    {% load static %}
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/create_library_admin.css' %}">
    <link rel="stylesheet" href="{% static 'css/footer.css' %}">
    <link rel="stylesheet" href="{% static 'css/navigation_internal.css' %}">
    <link rel="stylesheet" href="{% static 'css/sidebar_admin.css' %}">
    <script src="{% static 'js/navigation_scripts.js' %}" defer></script>
    <script src="{% static 'js/create_library_admin.js' %}" defer></script>
    <link rel="icon" type="image/x-icon" href="{% static 'picture/logo.ico' %}">
</head>

<body>
<header>
    <div class="logo-container">
        <a href="{% url 'home' %}" style="text-decoration: none;">
            <div class="logo">
                <img src="{% static 'picture/logo.jpg' %}" alt="Logo">
            </div>
        </a>
        <div class="search-bar">
            <input type="text" placeholder="Search in the whole store">
            <button>
                <svg id="Icons" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="20" height="20">
                    <path class="cls-1" d="M18.856,14.624a10.022,10.022,0,1,0-4.234,4.234l4.254,4.255a2.994,2.994,0,1,0,4.239-4.23ZM2,10a8,8,0,1,1,8,8A8.009,8.009,0,0,1,2,10ZM21.7,21.708a1,1,0,0,1-1.4,0l-3.967-3.968a10.092,10.092,0,0,0,1.4-1.406L21.705,20.3a.976.976,0,0,1-.009,1.407Z" />
                    <path class="cls-1" d="M10,4a6.006,6.006,0,0,0-6,6,1,1,0,0,0,2,0,4,4,0,0,1,4-4,1,1,0,0,0,0-2Z" />
                </svg>
            </button>
        </div>

        <div class="actions">
            {% if user.role != 'customer' %}
            <a href="{% url 'upload' %}" style="text-decoration: none;">
                <button>
                    <svg style="enable-background:new 0 0 24 24;" version="1.1" viewBox="0 0 24 24" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g id="grid_system"/>
                        <g id="_icons">
                            <g>
                                <path d="M8.7,9.7L11,7.4V15c0,0.6,0.4,1,1,1s1-0.4,1-1V7.4l2.3,2.3C15.5,9.9,15.7,10,16,10s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4l-4-4c-0.1-0.1-0.2-0.2-0.3-0.2c-0.2-0.1-0.5-0.1-0.8,0c-0.1,0.1-0.2,0.1-0.3,0.2l-4,4c-0.4,0.4-0.4,1,0,1.4S8.3,10.1,8.7,9.7z"/>
                                <path d="M19,13c-0.6,0-1,0.4-1,1v2c0,1.1-0.9,2-2,2H8c-1.1,0-2-0.9-2-2v-2c0-0.6-0.4-1-1-1s-1,0.4-1,1v2c0,2.2,1.8,4,4,4h8c2.2,0,4-1.8,4-4v-2C20,13.4,19.6,13,19,13z"/>
                            </g>
                        </g>
                    </svg>
                    Upload
                </button>
            </a>
            {% endif %}
            <button id="centerButton">
                <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                    <g data-name="Layer 2" id="Layer_2">
                        <path d="M16,29A13,13,0,1,1,29,16,13,13,0,0,1,16,29ZM16,5A11,11,0,1,0,27,16,11,11,0,0,0,16,5Z" />
                        <path d="M16,17a5,5,0,1,1,5-5A5,5,0,0,1,16,17Zm0-8a3,3,0,1,0,3,3A3,3,0,0,0,16,9Z" />
                        <path d="M25.55,24a1,1,0,0,1-.74-.32A11.35,11.35,0,0,0,16.46,20h-.92a11.27,11.27,0,0,0-7.85,3.16,1,1,0,0,1-1.38-1.44A13.24,13.24,0,0,1,15.54,18h.92a13.39,13.39,0,0,1,9.82,4.32A1,1,0,0,1,25.55,24Z" />
                    </g>
                </svg>
                My Center
            </button>
            <div class="popup" id="popupMenu">
                <a href="{% url 'profile' %}">My Profile</a>
                <a href="{% url 'collection' %}">My Collection</a>
                <a href="{% url 'cart' %}">My Cart</a>
                <a href="{% url 'order' %}">My Order</a>
                <a href="{% url 'logout' %}">Log Out</a>
            </div>
        </div>
    </div>
</header>

<div class="container">
    <aside>
        <div class="sidebar">
            <ul>
                <li><a href="{% url 'create_library' %}" class="active">Create a Library</a></li>
                <li><a href="{% url 'manage_libraries' %}">Manage All Libraries</a></li>
                <li><a href="{% url 'manage_admins' %}">Manage Administrators</a></li>
            </ul>
        </div>
    </aside>

    <main>
        <h2>Create a Library</h2>
        
        <form method="post" enctype="multipart/form-data" id="library-form">
            {% csrf_token %}
            
            {% if form.non_field_errors %}
                <div class="error-message">
                    {{ form.non_field_errors }}
                </div>
            {% endif %}
            
            <label for="id_name">Name</label>
            {{ form.name }}
            {% if form.name.errors %}
                <div class="error-message">{{ form.name.errors }}</div>
            {% endif %}

            <label for="id_logo">Logo</label>
            <div id="upload-box" style="border: 2px dashed #ccc; padding: 10px; cursor: pointer;">
                select a Logo
                <input type="file" id="file-input" name="logo" accept="image/*" style="display: none;">
            </div>
            
            <div id="preview-container"></div>
            {% if form.logo.errors %}
                <div class="error-message">{{ form.logo.errors }}</div>
            {% endif %}

            <label for="id_description">Description</label>
            {{ form.description }}
            {% if form.description.errors %}
                <div class="error-message">{{ form.description.errors }}</div>
            {% endif %}

            <!-- Category section -->
            <div class="category-container">
                <label class="category-label">Add a category</label>
                <button type="button" class="add-category-btn" onclick="openCategoryModal()">âž• add</button>
            </div>

            <!-- Category display area -->
            <div id="categoryList" class="category-list"></div>
            <input type="hidden" id="categories-json" name="categories_json" value="[]">
            
            <!-- Category modal -->
            <div id="categoryModal" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="closeCategoryModal()">&times;</span>
                    <h2>Add a category</h2>

                    <label for="categoryName">Name</label>
                    <input type="text" id="categoryName" placeholder="Enter category name">

                    <label for="categoryImage">Theme picture</label>
                    <input type="file" id="categoryImage" accept="image/*">
                    <img id="imagePreview" style="display: none; width: 100px; height: 100px;">

                    <label for="categoryDescription">Description</label>
                    <textarea id="categoryDescription" placeholder="Enter description"></textarea>

                    <p id="errorText" class="error-text"></p>
                    <button type="button" onclick="addCategory()">Add</button>
                </div>
            </div>

            <label for="id_theme_color">Theme Colour</label>
            <div id="colorPickerContainer">
                <div id="colorPreview" onclick="toggleColorPicker()"></div>
                <input type="color" id="themeColor" name="theme_color" onchange="updateColor()">
            </div>
            {% if form.theme_color.errors %}
                <div class="error-message">{{ form.theme_color.errors }}</div>
            {% endif %}

            <button type="submit" class="create-btn">Create</button>
        </form>
    </main>
</div>

<footer class="footer">
    <div class="divider"></div>
    <div class="footer-content">
        <!-- Logo Section -->
        <div class="footer-logo">
            <img src="{% static 'picture/logo.jpg' %}" alt="PALETTA Logo" style="width: 100px;">
            <p>&copy; FILMBRIGHT LTD. 2024</p>
        </div>

        <!-- Company Section -->
        <div class="footer-column">
            <h4>Company</h4>
            <ul>
                <li><a href="{% url 'about_us' %}">About us</a></li>
                <li><a href="{% url 'contact_us' %}">Contact us</a></li>
            </ul>
        </div>

        <!-- Support Section -->
        <div class="footer-column">
            <h4>Support</h4>
            <ul>
                <li><a href="{% url 'q_and_a' %}">Help & Support</a></li>
                <li><a href="#">Terms & Conditions</a></li>
                <li><a href="#">Privacy</a></li>
            </ul>
        </div>

        <!-- Social Media Section -->
        <div class="footer-column">
            <h4>Find us</h4>
            <div class="social-icon">
                <a href="https://www.instagram.com/filmbright/">
                    <svg data-name="Layer 1" id="Layer_1" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <style>.cls-1{fill:#80B824;}</style>
                        </defs>
                        <title/>
                        <path class="cls-1" d="M83,23a22,22,0,0,1,22,22V83a22,22,0,0,1-22,22H45A22,22,0,0,1,23,83V45A22,22,0,0,1,45,23H83m0-8H45A30.09,30.09,0,0,0,15,45V83a30.09,30.09,0,0,0,30,30H83a30.09,30.09,0,0,0,30-30V45A30.09,30.09,0,0,0,83,15Z"/>
                        <path class="cls-1" d="M90.14,32a5.73,5.73,0,1,0,5.73,5.73A5.73,5.73,0,0,0,90.14,32Z"/>
                        <path class="cls-1" d="M64.27,46.47A17.68,17.68,0,1,1,46.6,64.14,17.7,17.7,0,0,1,64.27,46.47m0-8A25.68,25.68,0,1,0,90,64.14,25.68,25.68,0,0,0,64.27,38.47Z"/>
                    </svg>
                </a>
            </div>
        </div>
    </div>
</footer>
</body>
</html>

